<VirtualHost *:80>
    ServerAdmin admin@veribits.com
    DocumentRoot /var/www/html

    # AllowEncodedSlashes must be at VirtualHost level, not Directory level
    AllowEncodedSlashes NoDecode

    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Preserve POST data and headers through rewrites
    # This is CRITICAL for php://input to work with mod_rewrite
    SetEnvIf Content-Type "(.+)" HTTP_CONTENT_TYPE=$1
    SetEnvIf Content-Length "(.+)" HTTP_CONTENT_LENGTH=$1

    # Log configuration
    ErrorLog /var/log/apache2/error.log
    CustomLog /var/log/apache2/access.log combined
</VirtualHost>
